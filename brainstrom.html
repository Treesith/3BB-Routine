<!DOCTYPE HTML>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>KEC / BCT A / 2068 : Routine</title>
<link rel="stylesheet" href="style.css" />

<script>
function formatted_time(secs){
	hrs = parseInt(secs / 3600);
	secs = secs - hrs*3600;
	mins = parseInt(secs / 60);
	secs = secs % 60;
	
	hrs = ''+hrs;
	mins = ''+mins;
	secs = ''+secs;
	
	hrs = hrs.length==1 ? '0'+hrs : hrs;
	mins = mins.length==1 ? '0'+mins : mins;
	secs = secs.length==1 ? '0'+secs : secs;

	return hrs + ':' + mins + ':' + secs;
}

function system_class(){
	this.today_date = new Date();
	this.time_in_secs = this.today_date.getHours()*3600 + this.today_date.getMinutes()*60 + this.today_date.getSeconds();
	this.time = formatted_time(this.time_in_secs);
	this.day = this.today_date.getDay();
}

function period_class(subject, start_hrs, start_mins, end_hrs, end_mins)
{
	this.subject=subject;
	this.start_hrs=start_hrs;
	this.start_mins=start_mins;
	this.end_hrs=end_hrs;
	this.end_mins=end_mins;
	this.time=time;
	this.start_time_in_secs=start_time_in_secs;
	this.end_time_in_secs=end_time_in_secs;
	function time(){
		s_time = formatted_time(this.start_hrs*3600+this.start_mins*60);
		e_time = formatted_time(this.end_hrs*3600+this.end_mins*60);
		return s_time.substr(0,5) + '  -  ' + e_time.substr(0,5);
	}
	function start_time_in_secs(){
		return this.start_hrs*3600+this.start_mins*60;
	}
	function end_time_in_secs(){
		return this.end_hrs*3600+this.end_mins*60;
	}
}

function period_timing_object(hrs, mins){
	this.hrs=hrs;
	this.mins;
}

period = new Array();

<!--Sunday-->
period[0] = new Array();

<!--Monday-->
period[1] = new Array();
period[1][0]=new period_class("Test",      7, 15,8, 5);
period[1][1]=new period_class("ECT Lab",   8, 5, 10, 35);
period[1][2]=new period_class("Break",     10, 35,11, 25);
period[1][3]=new period_class("Maths(JS)", 11, 25,12, 15);
period[1][4]=new period_class("Maths(RKS)",12, 15,13, 5);
period[1][5]=new period_class("EDC(DS)",   13, 5,14, 45);
period[1][6]=new period_class("EM(SD)",    14, 45,15, 35);

<!--Tuesday-->
period[2] = new Array();
period[2][0]=new period_class("DL(LA)",7,15,8,55);
period[2][1]=new period_class("OOP(SL)",8,55,10,35);
period[2][2]=new period_class("Break",10,35,11,25);
period[2][3]=new period_class("EM(SD)",11,25,13,5);
period[2][4]=new period_class("ECT(DS)",13,5,14,45);

<!--Wednesday-->
period[3] = new Array();
period[3][0]=new period_class("OOP(SL)",7,15,8,55);
period[3][1]=new period_class("Break",8,55,9,45);
period[3][2]=new period_class("OOP / DL Lab",9,45,12,15);
period[3][3]=new period_class("EDC(UM)",12,15,13,55);
period[3][4]=new period_class("EX",13,55,14,25);

<!--Thursday-->
period[4] = new Array();

<!--Friday-->
period[5] = new Array();

<!--Saturday-->
period[6] = new Array();

function display_routine(routine_id){
	system = new system_class();
	current_time = system.time_in_secs;

	document.getElementById("routine").innerHTML = "";
	document.getElementById("time").innerHTML = system.time;
	
	for(j=0;j<period[routine_id].length;j++){
		period_start_time = period[routine_id][j].start_time_in_secs();
		period_end_time = period[routine_id][j].end_time_in_secs();

		if(current_time>period_start_time && current_time<=period_end_time){
			document.getElementById("time").innerHTML = formatted_time(period_end_time-current_time).replace(/:/g, " : ");
			document.getElementById("routine").innerHTML += "<b>"+period[routine_id][j].time()+' | '+period[routine_id][j].subject+"</b>";
		}else{
			document.getElementById("routine").innerHTML += period[routine_id][j].time()+' | '+period[routine_id][j].subject;
		}

		document.getElementById("routine").innerHTML += "<br>";
	}
}

</script>

<script>
days = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

function init(){
	system = new system_class();
	day = system.day;

	document.getElementById("nav").innerHTML = "";

	for(i=0;i<period.length;i++){ 
		if(period[i].length != 0){
			if(day==i){
				document.getElementById("nav").innerHTML += "<b><a href=javascript:display_routine("+i+")>"+days[i]+"</a></b>"
			}else{
				document.getElementById("nav").innerHTML += "<a href=javascript:display_routine("+i+")>"+days[i]+"</a>";
			}
			document.getElementById("nav").innerHTML += " |";
		}
	}
	if(period[day].length==0){
		document.getElementById("routine").innerHTML="holiday :)";
	}else{
		display_routine(day);
	}
}


</script>

</head>
<body onload="init()">
<section>
	<header>
		<nav>
		<div id="nav"></div>
		</nav>
	</header>
</section>
	<article>
	<figure>
		<img src="" />
		<figcaption></figcaption>
	</figure>
	<div id="time"></div>
	<br />
	<div id="routine"></div>
	<input type=button value="Reload" onclick="init()"/>
	</article> 
	<aside>
	
	</aside>
<footer>

</footer>
</body>
</html>

